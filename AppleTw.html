<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

  <title>Apple(台灣)</title>

  <style>
    h1 {
      text-align: left;
      padding-bottom: 20px;
    }

    #picArea img {
      position: sticky;
      top: 0px;
    }

    .accordion-button::after {
      content: "更改" !important;
      background-image: unset !important;
      width: unset !important;
      font-size: 14px !important;
    }

    .accordion-button:not(.collapse)::after {
      transform: unset !important;
      /* content: "" !important; */
    }

    #colorButton button {
      width: 200px;
      margin: 5px auto;
      height: 100px;
      border: 1px gray solid;
      border-radius: 15px;
      background-color: #fff;
      font-size: 12px;
    }

    #colorButton .button {
      width: 200px;
      height: 100px;
      margin: 5px auto;
    }

    #colorButton img {
      width: 32px;
      height: 32px;
      margin-bottom: 6px;
    }

    #colorButton p {
      margin: 0px;
    }

    #storageButton button,
    #netWorkButton button {
      border: gray solid 1px;
      background-color: #fff;
      border-radius: 15px;
      margin: auto;
    }

    #storageButton button:not(first-child),
    #netWorkButton button:not(first-child) {
      width: 200px;
      height: 110px;
      margin: 10px auto;
    }

    #storageButton button:first-child,
    #netWorkButton button:first-child {
      width: 450px;
      height: 50px;
      border: none;
      background-color: #f5f5f7;
    }

    #storageButton p {
      margin-bottom: 0px;
      font-size: 22px;
      font-weight: bolder;
    }

    #netWorkButton p {
      margin-bottom: 0px;
      font-size: 17px;
      font-weight: bold;
    }

    #storageButton p:nth-child(2),
    #netWorkButton p:nth-child(2) {
      font-size: 10px;
      font-weight: normal;
    }
  </style>
</head>

<body>
  <header class="d-flex justify-content-between fs-6 fw-bolder my-2 border-bottom py-2 px-5">
    <div class="" id="productTitle">iPad Air</div>
    <div id="price">NT$18,900起</div>
  </header>
  <section>
    <div class="container">
      <div class="row">
        <div id="picArea" class="col-12 col-md-6 mt-5">
          <img
            src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-202009?wid=886&hei=1070&fmt=jpeg&qlt=95&.v=1599066777000"
            alt="" class="w-100">
        </div>
        <div id="selector" class="col-12 col-md-6 mt-5">
          <h1 class="ms-4 mb-0 fw-bolder">購買 iPad Air</h1>
          <div class="accordion" id="accordionPanelsStayOpenExample">
            <div class="accordion-item border-0">
              <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                <button class="accordion-button bg-white border-top" type="button" data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseOne">
                  <p class="mb-0 fs-4 fw-bolder text-dark" id="chosenColor"></p>
                </button>
              </h2>
              <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show"
                aria-labelledby="panelsStayOpen-headingOne">
                <div class="accordion-bod" id="colorButton">
                  <p class="text-dark py-3 fw-bolder fs-6">外觀</p>
                  <div class="row justify-content-evenly">
                    <button>
                      <img
                        src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-spacegray-201903?wid=204&amp;hei=204&amp;fmt=png-alpha&amp;.v=1552422652805"
                        alt="gray">
                      <p class="text-secondary">太空灰色</p>
                    </button>
                    <button>
                      <img
                        src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-silver-201903?wid=204&amp;hei=204&amp;fmt=png-alpha&amp;.v=1552422655664"
                        alt="silver">
                      <p class="text-secondary">銀色</p>
                    </button>
                    <button>
                      <img
                        src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-gold-202009?wid=204&amp;hei=204&amp;fmt=jpeg&amp;qlt=80&amp;.v=1599240136000"
                        alt="rose">
                      <p class="text-secondary">玫瑰金色</p>
                    </button>
                    <button>
                      <img
                        src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-green-202009?wid=204&amp;hei=204&amp;fmt=jpeg&amp;qlt=80&amp;.v=1599240136000"
                        alt="green">
                      <p class="text-secondary">綠色</p>
                    </button>
                    <button>
                      <img
                        src="https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/finish-blue-202009?wid=204&amp;hei=204&amp;fmt=png-alpha&amp;.v=1599240136000"
                        alt="blue">
                      <p class="text-secondary">天藍色</p>
                    </button>
                    <div class="button"></div>
                  </div>
                </div>
              </div>
            </div>
            <div class="accordion-item border-0">
              <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                <button class="accordion-button bg-white border-top" type="button" data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseTwo">
                  <p class="mb-0 fs-4 fw-bolder text-dark" id="chosenStorage"></p>
                </button>
              </h2>
              <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show"
                aria-labelledby="panelsStayOpen-headingTwo">
                <div class="accordion-body" id="storageButton">
                  <p class="text-dark py-3 fw-bolder fs-6">儲存裝置</p>
                  <div class="row justify-content-start">
                    <button class="d-none">///for空間modal///</button>
                    <button>
                      <p>64GB<sup>1</sup></p>
                      <p class="text-secondary">NT$18,900起</p>
                    </button>
                    <button>
                      <p>256GB<sup>1</sup></p>
                      <p class="text-secondary">NT$23,900起</p>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="accordion-item border-0">
              <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                <button class="accordion-button bg-white border-top" type="button" data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                  aria-controls="panelsStayOpen-collapseThree">
                  <p class="mb-0 fs-4 fw-bolder text-dark" id="chosenNetWork"></p>
                </button>
              </h2>
              <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show"
                aria-labelledby="panelsStayOpen-headingThree">
                <div class="accordion-body" id="netWorkButton">
                  <p class="text-dark py-3 fw-bolder fs-6">連線能力</p>
                  <div class="row justify-content-start">
                    <button class="d-none">///for空間modal///</button>
                    <button>
                      <p>Wi-Fi</p>
                      <p class="text-secondary">NT$18,900起</p>
                    </button>
                    <button>
                      <p>Wi-Fi+行動網路</p>
                      <p class="text-secondary">NT$23,200起</p>
                    </button>
                  </div>
                </div>
              </div>
              <div id="priceArea" class="fs-4 fw-bolder p-3 text-center">
                <!-- 價格 -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>


  <!-- Option 2: Separate Popper and Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"
    integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT"
    crossorigin="anonymous"></script>
  <script>
    const iPads = [
      { "sku": "0001", "color": "gray", "color_zh": "太空灰色", "storage": "64GB", "net_work": "Wi-Fi", "price": "NT$18,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-spacegray-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650646000" },
      { "sku": "0002", "color": "gray", "color_zh": "太空灰色", "storage": "64GB", "net_work": "Wi-Fi+行動網路", "price": "NT$23,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-spacegray-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650646000" },
      { "sku": "0003", "color": "gray", "color_zh": "太空灰色", "storage": "256GB", "net_work": "Wi-Fi", "price": "NT$23,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-spacegray-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650646000" },
      { "sku": "0004", "color": "gray", "color_zh": "太空灰色", "storage": "256GB", "net_work": "Wi-Fi+行動網路", "price": "NT$28,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-spacegray-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650646000" },

      { "sku": "0005", "color": "silver", "color_zh": "銀色", "storage": "64GB", "net_work": "Wi-Fi", "price": "NT$18,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-silver-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650645000" },
      { "sku": "0006", "color": "silver", "color_zh": "銀色", "storage": "64GB", "net_work": "Wi-Fi+行動網路", "price": "NT$23,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-silver-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650645000" },
      { "sku": "0007", "color": "silver", "color_zh": "銀色", "storage": "256GB", "net_work": "Wi-Fi", "price": "NT$23,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-silver-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650645000" },
      { "sku": "0008", "color": "silver", "color_zh": "銀色", "storage": "256GB", "net_work": "Wi-Fi+行動網路", "price": "NT$28,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-silver-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650645000" },

      { "sku": "0005", "color": "rose", "color_zh": "玫瑰金色", "storage": "64GB", "net_work": "Wi-Fi", "price": "NT$18,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-gold-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },
      { "sku": "0006", "color": "rose", "color_zh": "玫瑰金色", "storage": "64GB", "net_work": "Wi-Fi+行動網路", "price": "NT$23,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-gold-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },
      { "sku": "0007", "color": "rose", "color_zh": "玫瑰金色", "storage": "256GB", "net_work": "Wi-Fi", "price": "NT$23,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-gold-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },
      { "sku": "0008", "color": "rose", "color_zh": "玫瑰金色", "storage": "256GB", "net_work": "Wi-Fi+行動網路", "price": "NT$28,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-gold-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },

      { "sku": "0005", "color": "green", "color_zh": "綠色", "storage": "64GB", "net_work": "Wi-Fi", "price": "NT$18,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-green-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },
      { "sku": "0006", "color": "green", "color_zh": "綠色", "storage": "64GB", "net_work": "Wi-Fi+行動網路", "price": "NT$23,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-green-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },
      { "sku": "0007", "color": "green", "color_zh": "綠色", "storage": "256GB", "net_work": "Wi-Fi", "price": "NT$23,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-green-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },
      { "sku": "0008", "color": "green", "color_zh": "綠色", "storage": "256GB", "net_work": "Wi-Fi+行動網路", "price": "NT$28,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-green-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },

      { "sku": "0005", "color": "blue", "color_zh": "天藍色", "storage": "64GB", "net_work": "Wi-Fi", "price": "NT$18,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-blue-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },
      { "sku": "0006", "color": "blue", "color_zh": "天藍色", "storage": "64GB", "net_work": "Wi-Fi+行動網路", "price": "NT$23,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-blue-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },
      { "sku": "0007", "color": "blue", "color_zh": "天藍色", "storage": "256GB", "net_work": "Wi-Fi", "price": "NT$23,900", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-blue-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" },
      { "sku": "0008", "color": "blue", "color_zh": "天藍色", "storage": "256GB", "net_work": "Wi-Fi+行動網路", "price": "NT$28,200", "pic": "https://store.storeimages.cdn-apple.com/8756/as-images.apple.com/is/ipad-air-select-wifi-blue-202009?wid=940&hei=1112&fmt=png-alpha&.v=1598650644000" }
    ];

    window.onload = function () {
      // accordion btn 初始設定為display none
      let accBtn = $g(".accordion-button");
      accBtn.forEach(function (btn) {
        btn.style.setProperty("display", "none")
        btn.addEventListener("click", function () {
          this.style.setProperty("display", "none");
        })
      });


      //設定顔色button
      let colorBtn = $g("#colorButton button");
      colorBtn.forEach(function (btn) {
        btn.addEventListener("click", function () {
          setDataAtt(btn, "#panelsStayOpen-collapseOne");
          let chosenColor = $g("#chosenColor");
          chosenColor.innerText = this.children[1].innerText;
          changeImg();
          showPrice();
          accBtn[0].style.setProperty("display", "");
          accBtn[0].classList.remove("collapsed");

        });
      });

      //設定容量button
      let storageBtn = $g("#storageButton button");
      storageBtn.forEach(function (btn) {
        btn.addEventListener("click", function () {
          setDataAtt(btn, "#panelsStayOpen-collapseTwo");
          let chosenStorage = $g("#chosenStorage");
          chosenStorage.innerText = this.children[0].childNodes[0].textContent;
          showPrice();
          accBtn[1].style.setProperty("display", "");
          accBtn[1].classList.remove("collapsed");

          let netWorkBtn = $g("#netWorkButton button");
          if (chosenStorage.innerText == "64GB") {
            netWorkBtn[1].children[1].innerText = "NT$18,900起"
            netWorkBtn[2].children[1].innerText = "NT$23,200起"
          }
          else if (chosenStorage.innerText == "256GB") {
            netWorkBtn[1].children[1].innerText = "NT$23,900起"
            netWorkBtn[2].children[1].innerText = "NT$28,200起"
          }
        });
      })

      //設定網路button
      let netWorkbtn = $g("#netWorkButton button");
      netWorkbtn.forEach(function (btn) {
        btn.addEventListener("click", function () {
          setDataAtt(btn, "#panelsStayOpen-collapseThree");
          let chosenNetWork = $g("#chosenNetWork");
          chosenNetWork.innerText = this.children[0].textContent;
          showPrice();
          accBtn[2].style.setProperty("display", "");
          accBtn[2].classList.remove("collapsed");
        });
      });

      //show Choice 的時候要收起collapse area並顯示客戶選擇的選項
      function setDataAtt(setButton, collapseTarget) {
        setButton.setAttribute("data-bs-toggle", "collapse")
        setButton.setAttribute("data-bs-target", collapseTarget);
        let collapseT = $g(collapseTarget);
        collapseT.classList.remove("show");
      }

      function $g(element) {
        let found = document.querySelectorAll(element);
        return found.length == 1 ? found[0] : found;
      }

      function changeImg() {
        //To do
        let chosenColorText = $g("#chosenColor").innerText;
        let img = $g("#picArea>img");
        let product_img = iPads.find(x => x.color_zh == chosenColorText).pic;

        img.setAttribute("src", product_img);
      }

      function showPrice() {
        let chosenColorText = $g("#chosenColor").innerText;
        let chosenStorageText = $g("#chosenStorage").innerText;
        let chosenNetWorkText = $g("#chosenNetWork").innerText;
        let priceArea = $g("#priceArea");
        let headPrice = $g("#price")
        if (chosenColorText != "" && chosenStorageText != "" && chosenNetWorkText != "") {
          let product = iPads.find(x => x.color_zh == chosenColorText && x.storage == chosenStorageText && x.net_work == chosenNetWorkText);
          priceArea.innerText = `${product.price}起`;
          headPrice.innerText = `${product.price}起`
        }
      }
    }

  </script>

</body>

</html>